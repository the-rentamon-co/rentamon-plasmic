/* eslint-disable */
/* tslint:disable */
// @ts-nocheck
/* prettier-ignore-start */

/** @jsxRuntime classic */
/** @jsx createPlasmicElementProxy */
/** @jsxFrag React.Fragment */

// This class is auto-generated by Plasmic; please do not edit!
// Plasmic Project: 7SNMkB8UMukVgcWJYokeAQ
// Component: b6PQkKJ78XCS

import * as React from "react";

import Head from "next/head";
import Link, { LinkProps } from "next/link";
import { useRouter } from "next/router";

import {
  Flex as Flex__,
  MultiChoiceArg,
  PlasmicDataSourceContextProvider as PlasmicDataSourceContextProvider__,
  PlasmicIcon as PlasmicIcon__,
  PlasmicImg as PlasmicImg__,
  PlasmicLink as PlasmicLink__,
  PlasmicPageGuard as PlasmicPageGuard__,
  SingleBooleanChoiceArg,
  SingleChoiceArg,
  Stack as Stack__,
  StrictProps,
  Trans as Trans__,
  classNames,
  createPlasmicElementProxy,
  deriveRenderOpts,
  ensureGlobalVariants,
  generateOnMutateForSpec,
  generateStateOnChangeProp,
  generateStateOnChangePropForCodeComponents,
  generateStateValueProp,
  get as $stateGet,
  hasVariant,
  initializeCodeComponentStates,
  initializePlasmicStates,
  makeFragment,
  omit,
  pick,
  renderPlasmicSlot,
  set as $stateSet,
  useCurrentUser,
  useDollarState,
  usePlasmicTranslator,
  useTrigger,
  wrapWithClassName
} from "@plasmicapp/react-web";
import {
  DataCtxReader as DataCtxReader__,
  useDataEnv,
  useGlobalActions
} from "@plasmicapp/react-web/lib/host";

import { ApiRequest } from "@/fragment/components/api-request"; // plasmic-import: a17-BE4K1UE7/codeComponent
import { Embed } from "@plasmicpkgs/plasmic-basic-components";
import { _useGlobalVariants } from "./plasmic"; // plasmic-import: 7SNMkB8UMukVgcWJYokeAQ/projectModule
import { _useStyleTokens } from "./PlasmicStyleTokensProvider"; // plasmic-import: 7SNMkB8UMukVgcWJYokeAQ/styleTokensProvider

import "@plasmicapp/react-web/lib/plasmic.css";

import projectcss from "./plasmic.module.css"; // plasmic-import: 7SNMkB8UMukVgcWJYokeAQ/projectcss
import sty from "./PlasmicDirectBooking.module.css"; // plasmic-import: b6PQkKJ78XCS/css

createPlasmicElementProxy;

export type PlasmicDirectBooking__VariantMembers = {};
export type PlasmicDirectBooking__VariantsArgs = {};
type VariantPropType = keyof PlasmicDirectBooking__VariantsArgs;
export const PlasmicDirectBooking__VariantProps = new Array<VariantPropType>();

export type PlasmicDirectBooking__ArgsType = {};
type ArgPropType = keyof PlasmicDirectBooking__ArgsType;
export const PlasmicDirectBooking__ArgProps = new Array<ArgPropType>();

export type PlasmicDirectBooking__OverridesType = {
  root?: Flex__<"div">;
  main?: Flex__<"div">;
  profile2?: Flex__<typeof ApiRequest>;
  img?: Flex__<typeof PlasmicImg__>;
  apiRequest2?: Flex__<typeof ApiRequest>;
};

export interface DefaultDirectBookingProps {}

const $$ = {};

function useNextRouter() {
  try {
    return useRouter();
  } catch {}
  return undefined;
}

function PlasmicDirectBooking__RenderFunc(props: {
  variants: PlasmicDirectBooking__VariantsArgs;
  args: PlasmicDirectBooking__ArgsType;
  overrides: PlasmicDirectBooking__OverridesType;
  forNode?: string;
}) {
  const { variants, overrides, forNode } = props;

  const args = React.useMemo(
    () =>
      Object.assign(
        {},
        Object.fromEntries(
          Object.entries(props.args).filter(([_, v]) => v !== undefined)
        )
      ),
    [props.args]
  );

  const $props = {
    ...args,
    ...variants
  };

  const __nextRouter = useNextRouter();

  const $ctx = useDataEnv?.() || {};
  const refsRef = React.useRef({});
  const $refs = refsRef.current;

  const globalVariants = _useGlobalVariants();

  const stateSpecs: Parameters<typeof useDollarState>[0] = React.useMemo(
    () => [
      {
        path: "profile2.data",
        type: "private",
        variableType: "object",
        initFunc: ({ $props, $state, $queries, $ctx }) => undefined,

        refName: "profile2"
      },
      {
        path: "profile2.error",
        type: "private",
        variableType: "object",
        initFunc: ({ $props, $state, $queries, $ctx }) => undefined,

        refName: "profile2"
      },
      {
        path: "profile2.loading",
        type: "private",
        variableType: "boolean",
        initFunc: ({ $props, $state, $queries, $ctx }) => undefined,

        refName: "profile2"
      },
      {
        path: "apiRequest2.data",
        type: "private",
        variableType: "object",
        initFunc: ({ $props, $state, $queries, $ctx }) => undefined,

        refName: "apiRequest2"
      },
      {
        path: "apiRequest2.error",
        type: "private",
        variableType: "object",
        initFunc: ({ $props, $state, $queries, $ctx }) => undefined,

        refName: "apiRequest2"
      },
      {
        path: "apiRequest2.loading",
        type: "private",
        variableType: "boolean",
        initFunc: ({ $props, $state, $queries, $ctx }) => undefined,

        refName: "apiRequest2"
      }
    ],
    [$props, $ctx, $refs]
  );
  const $state = useDollarState(stateSpecs, {
    $props,
    $ctx,
    $queries: {},
    $refs
  });

  const styleTokensClassNames = _useStyleTokens();

  return (
    <React.Fragment>
      <Head></Head>

      <style>{`
        body {
          margin: 0;
        }
      `}</style>

      <div className={projectcss.plasmic_page_wrapper}>
        <div
          data-plasmic-name={"root"}
          data-plasmic-override={overrides.root}
          data-plasmic-root={true}
          data-plasmic-for-node={forNode}
          className={classNames(
            projectcss.all,
            projectcss.root_reset,
            projectcss.plasmic_default_styles,
            projectcss.plasmic_mixins,
            styleTokensClassNames,
            sty.root
          )}
        >
          <div
            data-plasmic-name={"main"}
            data-plasmic-override={overrides.main}
            className={classNames(projectcss.all, sty.main)}
          >
            <div className={classNames(projectcss.all, sty.freeBox__qPh1L)}>
              <div className={classNames(projectcss.all, sty.freeBox__de6Fk)}>
                <div className={classNames(projectcss.all, sty.freeBox__dGt4W)}>
                  <ApiRequest
                    data-plasmic-name={"profile2"}
                    data-plasmic-override={overrides.profile2}
                    className={classNames("__wab_instance", sty.profile2)}
                    errorDisplay={null}
                    loadingDisplay={null}
                    method={"GET"}
                    onError={async (...eventArgs: any) => {
                      generateStateOnChangeProp($state, [
                        "profile2",
                        "error"
                      ]).apply(null, eventArgs);
                    }}
                    onLoading={async (...eventArgs: any) => {
                      generateStateOnChangeProp($state, [
                        "profile2",
                        "loading"
                      ]).apply(null, eventArgs);
                    }}
                    onSuccess={async (...eventArgs: any) => {
                      generateStateOnChangeProp($state, [
                        "profile2",
                        "data"
                      ]).apply(null, eventArgs);
                    }}
                    ref={ref => {
                      $refs["profile2"] = ref;
                    }}
                    url={
                      hasVariant(globalVariants, "screen", "mobile")
                        ? (() => {
                            try {
                              return `https://automation.miaan.ir/webhook/profile?property_id=${$ctx.params.property_id}`;
                            } catch (e) {
                              if (
                                e instanceof TypeError ||
                                e?.plasmicType === "PlasmicUndefinedDataError"
                              ) {
                                return undefined;
                              }
                              throw e;
                            }
                          })()
                        : (() => {
                            try {
                              return `https://automation.miaan.ir/webhook/profile?property_id=${$ctx.params.property_id}`;
                            } catch (e) {
                              if (
                                e instanceof TypeError ||
                                e?.plasmicType === "PlasmicUndefinedDataError"
                              ) {
                                return undefined;
                              }
                              throw e;
                            }
                          })()
                    }
                  >
                    <div
                      className={classNames(projectcss.all, sty.freeBox__ef0Yb)}
                    >
                      <div
                        className={classNames(
                          projectcss.all,
                          sty.freeBox__lTjJa
                        )}
                      >
                        <PlasmicImg__
                          data-plasmic-name={"img"}
                          data-plasmic-override={overrides.img}
                          alt={""}
                          className={classNames(sty.img)}
                          displayHeight={"auto"}
                          displayMaxHeight={"none"}
                          displayMaxWidth={"100%"}
                          displayMinHeight={"0"}
                          displayMinWidth={"0"}
                          displayWidth={"auto"}
                          loading={"lazy"}
                          src={
                            hasVariant(globalVariants, "screen", "mobile")
                              ? $state.profile2.data.profile_pic
                              : (() => {
                                  try {
                                    return $state.profile2.data.profile_pic;
                                  } catch (e) {
                                    if (
                                      e instanceof TypeError ||
                                      e?.plasmicType ===
                                        "PlasmicUndefinedDataError"
                                    ) {
                                      return undefined;
                                    }
                                    throw e;
                                  }
                                })()
                          }
                        />
                      </div>
                      <div
                        className={classNames(
                          projectcss.all,
                          sty.freeBox__eznaN
                        )}
                      >
                        <div
                          className={classNames(
                            projectcss.all,
                            projectcss.__wab_text,
                            sty.text__tGCaP
                          )}
                        >
                          <React.Fragment>
                            {(() => {
                              try {
                                return (
                                  "نام میزبان: " +
                                  $state.profile2.data.first_name +
                                  " " +
                                  $state.profile2.data.last_name
                                );
                              } catch (e) {
                                if (
                                  e instanceof TypeError ||
                                  e?.plasmicType === "PlasmicUndefinedDataError"
                                ) {
                                  return "";
                                }
                                throw e;
                              }
                            })()}
                          </React.Fragment>
                        </div>
                      </div>
                      <div
                        className={classNames(
                          projectcss.all,
                          sty.freeBox__aTjQc
                        )}
                      >
                        <div
                          className={classNames(
                            projectcss.all,
                            projectcss.__wab_text,
                            sty.text__juF9I
                          )}
                        >
                          {""}
                        </div>
                      </div>
                    </div>
                  </ApiRequest>
                </div>
              </div>
            </div>
            <ApiRequest
              data-plasmic-name={"apiRequest2"}
              data-plasmic-override={overrides.apiRequest2}
              className={classNames("__wab_instance", sty.apiRequest2)}
              errorDisplay={null}
              loadingDisplay={null}
              method={"GET"}
              onError={async (...eventArgs: any) => {
                generateStateOnChangeProp($state, [
                  "apiRequest2",
                  "error"
                ]).apply(null, eventArgs);
              }}
              onLoading={async (...eventArgs: any) => {
                generateStateOnChangeProp($state, [
                  "apiRequest2",
                  "loading"
                ]).apply(null, eventArgs);
              }}
              onSuccess={async (...eventArgs: any) => {
                generateStateOnChangeProp($state, [
                  "apiRequest2",
                  "data"
                ]).apply(null, eventArgs);
              }}
              ref={ref => {
                $refs["apiRequest2"] = ref;
              }}
              url={(() => {
                try {
                  return (() => {
                    return `https://automation.miaan.ir/webhook/calendar/blocked-dates?property_id=${$ctx.params.property_id}`;
                  })();
                } catch (e) {
                  if (
                    e instanceof TypeError ||
                    e?.plasmicType === "PlasmicUndefinedDataError"
                  ) {
                    return undefined;
                  }
                  throw e;
                }
              })()}
            >
              <div className={classNames(projectcss.all, sty.freeBox__yBaL)}>
                <Embed
                  className={classNames("__wab_instance", sty.embedHtml__qCmh3)}
                  code={(() => {
                    try {
                      return `<div id="smart-calendar-widget">
  <style>
    #smart-calendar-widget {
      --cal-main: #0070BB;
      --cal-bg-range: #e6f2fa;
      --cal-blocked: #e2e2e2; /* رنگ پس‌زمینه روزهای پر */
      --cal-blocked-text: #ccc; /* رنگ متن روزهای پر */
      --radius: 8px;
      
      direction: rtl; 
      /* font-family حذف شد تا از سیستم ارث ببرد */
      
      width: 100%; max-width: 400px; padding: 10px; margin: 0 auto;
      background: #fff; border-radius: 12px;
      /* box-shadow حذف شد */
      box-sizing: border-box;
    }
    #smart-calendar-widget * { box-sizing: border-box; }

    /* Header */
    #smart-calendar-widget .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; font-weight: bold; color: #333; }
    
    /* تغییر رنگ فلش‌ها به مشکی */
    #smart-calendar-widget .nav-btn { background: none; border: none; cursor: pointer; font-size: 1.4rem; color: #000; padding: 0 10px; }

    /* Grids */
    #smart-calendar-widget .weekdays { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; margin-bottom: 10px; font-size: 0.85rem; color: #888; }
    #smart-calendar-widget .days-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; min-height: 200px; }

    /* Cells */
    #smart-calendar-widget .day-cell { 
        aspect-ratio: 1; border-radius: var(--radius); 
        display: flex; flex-direction: column; justify-content: center; align-items: center; 
        font-size: 0.95rem; cursor: pointer; border: 1px solid #ddd; /* بوردر پیش‌فرض مثل نمونه */
        transition: all 0.2s; position: relative; background: #fff;
        color: #333;
    }
    
    /* هاور فقط روی روزهای آزاد */
    #smart-calendar-widget .day-cell:hover:not(.past-day):not(.blocked) { border-color: var(--cal-main); color: var(--cal-main); }
    
    /* مخفی کردن کامل روزهای گذشته (مثل نمونه کد شما) */
    #smart-calendar-widget .past-day { 
        opacity: 0; 
        pointer-events: none; 
    }
    
    /* استایل روزهای بلاک شده (طبق کد نمونه) */
    #smart-calendar-widget .blocked { 
        background-color: var(--cal-blocked) !important; 
        border-color: var(--cal-blocked) !important;
        color: var(--cal-blocked-text) !important; 
        cursor: default !important; 
        pointer-events: none; 
    }
    
    /* استایل‌های انتخاب بازه */
    #smart-calendar-widget .selected { background-color: var(--cal-main); color: #fff !important; border-color: var(--cal-main); }
    
    #smart-calendar-widget .in-range { background-color: var(--cal-bg-range); color: var(--cal-main); border-radius: 0; border-color: var(--cal-bg-range); }
    #smart-calendar-widget .range-start { border-radius: 0 8px 8px 0; }
    #smart-calendar-widget .range-end { border-radius: 8px 0 0 8px; }
    #smart-calendar-widget .selected:not(.range-start):not(.range-end) { border-radius: 8px; }

    /* Loading / Error */
    #smart-calendar-widget .status-msg { grid-column: 1 / -1; text-align: center; padding: 40px; color: #666; font-size: 0.9rem; line-height: 1.6; }
    #smart-calendar-widget .error-text { color: red; direction: ltr; font-family: monospace; font-size: 0.8rem; margin-top: 10px; display: block;}
  </style>

  <div class="header">
    <button class="nav-btn" type="button" onclick="window.smartCal.changeMonth(-1)">&#10094;</button> 
    <span id="cal-month-label">...</span>
    <button class="nav-btn" type="button" onclick="window.smartCal.changeMonth(1)">&#10095;</button>
  </div>
  
  <div class="weekdays"><div>ش</div><div>ی</div><div>د</div><div>س</div><div>چ</div><div>پ</div><div>ج</div></div>
  
  <div class="days-grid" id="cal-days-grid">
    <div class="status-msg" id="cal-status">
        درحال دریافت اطلاعات...
    </div>
  </div>
</div>

<script>
window.smartCal = (function() {
  // --- 1. تنظیمات و داده‌ها ---
  
  // کد داینامیک شما
  var API_BOOKED_DATES = ${JSON.stringify($state.apiRequest2?.data?.dates ?? [])};
  var PERSIAN_MONTHS = ['فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور', 'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'];
  
  var bookedSet = new Set(API_BOOKED_DATES || []);
  var state = { todayJ: null, currYear: null, currMonth: null, selStart: null, selEnd: null };

  // --- 2. توابع کمکی ---
  function getJDateStr(y, m, d) { return y + '-' + String(m).padStart(2, '0') + '-' + String(d).padStart(2, '0'); }
  
  function compareJDates(d1, d2) {
    if(!d1 || !d2) return null;
    if(d1.jy !== d2.jy) return d1.jy - d2.jy;
    if(d1.jm !== d2.jm) return d1.jm - d2.jm;
    return d1.jd - d2.jd;
  }

  function calcNights(start, end) {
    if(!start || !end) return 0;
    var gStart = jalaali.toGregorian(start.jy, start.jm, start.jd);
    var gEnd = jalaali.toGregorian(end.jy, end.jm, end.jd);
    var d1 = new Date(gStart.gy, gStart.gm-1, gStart.gd);
    var d2 = new Date(gEnd.gy, gEnd.gm-1, gEnd.gd);
    return Math.ceil(Math.abs(d2 - d1) / (1000 * 60 * 60 * 24));
  }

  // --- 3. رندر اصلی ---
  function render() {
    try {
        var grid = document.getElementById('cal-days-grid');
        var label = document.getElementById('cal-month-label');
        if(!grid) return;

        grid.innerHTML = ''; 
        label.innerText = PERSIAN_MONTHS[state.currMonth - 1] + ' ' + state.currYear;

        var daysLen = jalaali.jalaaliMonthLength(state.currYear, state.currMonth);
        var gDate = jalaali.toGregorian(state.currYear, state.currMonth, 1);
        var startDay = new Date(gDate.gy, gDate.gm - 1, gDate.gd).getDay() + 1;
        if (startDay === 7) startDay = 0;

        for(var i=0; i<startDay; i++) grid.appendChild(document.createElement('div'));

        for(var d=1; d<=daysLen; d++) {
            (function(dayNum) {
                var cell = document.createElement('div');
                var dateObj = { jy: state.currYear, jm: state.currMonth, jd: dayNum };
                var dateStr = getJDateStr(state.currYear, state.currMonth, dayNum);
                
                var cls = 'day-cell';
                
                // بررسی وضعیت‌ها
                var isBlocked = bookedSet.has(dateStr);
                var isPast = compareJDates(dateObj, state.todayJ) < 0; // روزهای قبل از امروز

                var isStart = compareJDates(dateObj, state.selStart) === 0;
                var isEnd = compareJDates(dateObj, state.selEnd) === 0;
                var inRange = state.selStart && state.selEnd && 
                              compareJDates(dateObj, state.selStart) > 0 && 
                              compareJDates(dateObj, state.selEnd) < 0;

                // اولویت‌دهی کلاس‌ها
                if (isPast) {
                    cls += ' past-day'; // کلاس مخفی کننده
                } else if (isBlocked) {
                    cls += ' blocked';
                } else if (isStart) {
                    cls += ' selected range-start';
                } else if (isEnd) {
                    cls += ' selected range-end';
                } else if (inRange) {
                    cls += ' in-range';
                }

                cell.className = cls;
                
                // فقط عدد روز (بدون قیمت، چون خواستید مثل نمونه باشد)
                cell.innerHTML = '<span>' + dayNum + '</span>';

                // اگر روز مخفی یا بلاک نیست، کلیک فعال باشد
                if(!isBlocked && !isPast) {
                    cell.onclick = function() { handleDateClick(dateObj); };
                }
                grid.appendChild(cell);
            })(d);
        }
    } catch(err) {
        showError(err.message);
    }
  }

  function handleDateClick(date) {
    if (!state.selStart) {
        state.selStart = date;
    } else if (compareJDates(date, state.selStart) === 0 && !state.selEnd) {
        state.selStart = null;
    } else if (!state.selEnd) {
        if (compareJDates(date, state.selStart) < 0) state.selStart = date;
        else state.selEnd = date;
    } else {
        state.selStart = date;
        state.selEnd = null;
    }
    broadcast();
    render();
  }

  function broadcast() {
    var nights = (state.selStart && state.selEnd) ? calcNights(state.selStart, state.selEnd) : 0;
    var data = {
        startDate: state.selStart ? getJDateStr(state.selStart.jy, state.selStart.jm, state.selStart.jd) : null,
        endDate: state.selEnd ? getJDateStr(state.selEnd.jy, state.selEnd.jm, state.selEnd.jd) : null,
        nightsCount: nights
    };
    window.dispatchEvent(new CustomEvent('calendar-update', { detail: data }));
  }

  function changeMonth(dir) {
    state.currMonth += dir;
    if(state.currMonth > 12) { state.currMonth = 1; state.currYear++; }
    if(state.currMonth < 1) { state.currMonth = 12; state.currYear--; }
    render();
  }

  function showError(msg) {
    var el = document.getElementById('cal-status');
    if(el) {
        el.innerHTML = '<span class="error-text">' + msg + '</span>';
    }
  }

  function init() {
    if (typeof jalaali === 'undefined') {
        var script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/jalaali-js/dist/jalaali.js';
        script.onload = function() { startLogic(); };
        script.onerror = function() { showError("کتابخانه تقویم لود نشد."); };
        document.head.appendChild(script);
    } else {
        startLogic();
    }
  }

  function startLogic() {
    try {
        state.todayJ = jalaali.toJalaali(new Date());
        state.currYear = state.todayJ.jy;
        state.currMonth = state.todayJ.jm;
        render();
    } catch(e) {
        showError(e.message);
    }
  }

  setTimeout(init, 100);
  return { changeMonth: changeMonth };
})();
</script>
`;
                    } catch (e) {
                      if (
                        e instanceof TypeError ||
                        e?.plasmicType === "PlasmicUndefinedDataError"
                      ) {
                        return "";
                      }
                      throw e;
                    }
                  })()}
                />

                <div className={classNames(projectcss.all, sty.freeBox__bIzk)}>
                  <div
                    className={classNames(projectcss.all, sty.freeBox___2EUy1)}
                  >
                    <Embed
                      className={classNames(
                        "__wab_instance",
                        sty.embedHtml__mojIr
                      )}
                      code={
                        '<div id="booking-widget-wrapper">\r\n  <style>\r\n    \r\n    /* \u062f\u06a9\u0645\u0647 \u0627\u0635\u0644\u06cc */\r\n    #booking-widget-wrapper .trigger-container { text-align: center; margin-top: 20px; }\r\n    #booking-widget-wrapper .trigger-btn {\r\n        background: #0070BB; color: white; padding: 12px 40px; \r\n        border: none; border-radius: 8px; cursor: pointer; font-size: 1.1rem;\r\n        transition: 0.3s; box-shadow: 0 4px 10px rgba(0, 112, 187, 0.2);\r\n    }\r\n    #booking-widget-wrapper .trigger-btn:disabled { background: #ccc; cursor: not-allowed; box-shadow: none; }\r\n    #booking-widget-wrapper .trigger-btn:hover:not(:disabled) { background: #005a96; }\r\n\r\n    /* \u0645\u0648\u062f\u0627\u0644 */\r\n    #booking-widget-wrapper .modal-overlay {\r\n        position: fixed; top: 0; left: 0; width: 100%; height: 100%;\r\n        background: rgba(0,0,0,0.6); z-index: 9999;\r\n        display: none; justify-content: center; align-items: center;\r\n    }\r\n    #booking-widget-wrapper .modal-overlay.open { display: flex; }\r\n\r\n    #booking-widget-wrapper .modal-box {\r\n        background: white; padding: 25px; border-radius: 12px;\r\n        width: 90%; max-width: 400px; position: relative;\r\n    }\r\n\r\n    #booking-widget-wrapper .close-icon {\r\n        position: absolute; left: 20px; top: 15px; font-size: 24px; cursor: pointer; color: #888;\r\n    }\r\n\r\n    /* \u0641\u0631\u0645 */\r\n    #booking-widget-wrapper .info-box {\r\n        background: #f0f8ff; padding: 15px; border-radius: 8px; margin-bottom: 20px; font-size: 0.9em;\r\n    }\r\n    #booking-widget-wrapper .info-row { display: flex; justify-content: space-between; margin-bottom: 5px; }\r\n    \r\n    #booking-widget-wrapper .inp-group { margin-bottom: 15px; }\r\n    #booking-widget-wrapper .inp-label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9em; }\r\n    #booking-widget-wrapper .inp-field {\r\n        width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box;\r\n    }\r\n    \r\n    #booking-widget-wrapper .final-btn {\r\n        width: 100%; padding: 12px; background: #0070BB; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem;\r\n    }\r\n    #booking-widget-wrapper .err-txt { color: red; font-size: 0.8em; display: none; margin-top: 5px; }\r\n  </style>\r\n\r\n  <div class="trigger-container">\r\n    <button id="bookBtn" class="trigger-btn" disabled>\u062b\u0628\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0631\u0632\u0631\u0648</button>\r\n  </div>\r\n\r\n  <div class="modal-overlay" id="modalOverlay">\r\n    <div class="modal-box">\r\n      <div class="close-icon" id="closeModal">&times;</div>\r\n      <h3 style="margin-top:0; border-bottom:2px solid #0070BB; display:inline-block; padding-bottom:5px;">\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0631\u0632\u0631\u0648</h3>\r\n      \r\n      <div class="info-box">\r\n          <div class="info-row"><span>\u0648\u0631\u0648\u062f:</span> <span id="sStart">-</span></div>\r\n          <div class="info-row"><span>\u062e\u0631\u0648\u062c:</span> <span id="sEnd">-</span></div>\r\n          <div class="info-row" style="font-weight:bold; color:#0070BB; border-top:1px solid #ddd; padding-top:5px; margin-top:5px;">\r\n             <span>\u0645\u062f\u062a \u0627\u0642\u0627\u0645\u062a:</span> <span id="sNights">0 \u0634\u0628</span>\r\n          </div>\r\n      </div>\r\n\r\n      <form id="reqForm">\r\n        <div class="inp-group">\r\n          <label class="inp-label">\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc</label>\r\n          <input type="text" id="nameInp" class="inp-field" required>\r\n        </div>\r\n        <div class="inp-group">\r\n          <label class="inp-label">\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647</label>\r\n          <input type="tel" id="phoneInp" class="inp-field" required>\r\n        </div>\r\n        <div class="inp-group">\r\n          <label class="inp-label">\u062a\u0639\u062f\u0627\u062f \u0646\u0641\u0631\u0627\u062a (\u062d\u062f\u0627\u06a9\u062b\u0631 \u06f4)</label>\r\n          <input type="number" id="guestInp" class="inp-field" min="1" max="4" value="1" required>\r\n          <div id="guestErr" class="err-txt">\u062a\u0639\u062f\u0627\u062f \u0646\u0641\u0631\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u0627\u0632 \u0645\u062c\u0627\u0632 \u0627\u0633\u062a.</div>\r\n        </div>\r\n        <button type="submit" id="finalBtn" class="final-btn">\u062b\u0628\u062a \u0646\u0647\u0627\u06cc\u06cc \u062f\u0631\u062e\u0648\u0627\u0633\u062a</button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script>\r\n(function() {\r\n  var bookBtn = document.getElementById(\'bookBtn\');\r\n  var modal = document.getElementById(\'modalOverlay\');\r\n  var close = document.getElementById(\'closeModal\');\r\n  var form = document.getElementById(\'reqForm\');\r\n  var finalBtn = document.getElementById(\'finalBtn\');\r\n  var guestInp = document.getElementById(\'guestInp\');\r\n  var guestErr = document.getElementById(\'guestErr\');\r\n  \r\n  var sStart = document.getElementById(\'sStart\');\r\n  var sEnd = document.getElementById(\'sEnd\');\r\n  var sNights = document.getElementById(\'sNights\');\r\n\r\n  var bookingState = {};\r\n\r\n  // \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u062a\u0642\u0648\u06cc\u0645\r\n  window.addEventListener(\'calendar-update\', function(e) {\r\n    bookingState = e.detail;\r\n    if(bookingState.startDate && bookingState.endDate && bookingState.nightsCount > 0) {\r\n        bookBtn.disabled = false;\r\n        sStart.innerText = bookingState.startDate;\r\n        sEnd.innerText = bookingState.endDate;\r\n        sNights.innerText = bookingState.nightsCount + \' \u0634\u0628\';\r\n    } else {\r\n        bookBtn.disabled = true;\r\n    }\r\n  });\r\n\r\n  // \u0645\u0648\u062f\u0627\u0644\r\n  bookBtn.onclick = function() { modal.className += \' open\'; };\r\n  function closeModalFunc() { modal.className = modal.className.replace(\' open\', \'\'); }\r\n  close.onclick = closeModalFunc;\r\n  \r\n  // \u0627\u0639\u062a\u0628\u0627\u0631\u0633\u0646\u062c\u06cc\r\n  guestInp.oninput = function() {\r\n    if(parseInt(guestInp.value) > 4) {\r\n        guestErr.style.display = \'block\';\r\n        finalBtn.disabled = true;\r\n    } else {\r\n        guestErr.style.display = \'none\';\r\n        finalBtn.disabled = false;\r\n    }\r\n  };\r\n\r\n  // \u0627\u0631\u0633\u0627\u0644\r\n  form.onsubmit = function(e) {\r\n    e.preventDefault();\r\n    if(parseInt(guestInp.value) > 4) return;\r\n\r\n    finalBtn.innerText = \'\u062f\u0631 \u062d\u0627\u0644 \u0627\u0631\u0633\u0627\u0644...\';\r\n    finalBtn.disabled = true;\r\n\r\n    var payload = {\r\n        guest: document.getElementById(\'nameInp\').value,\r\n        phone: document.getElementById(\'phoneInp\').value,\r\n        count: guestInp.value,\r\n        dates: bookingState\r\n    };\r\n\r\n    // \u0634\u0628\u06cc\u0647\u200c\u0633\u0627\u0632\u06cc \u0627\u0631\u0633\u0627\u0644 \u0628\u0647 n8n\r\n    // \u062f\u0631 \u0627\u06cc\u0646\u062c\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f fetch \u0648\u0627\u0642\u0639\u06cc \u0628\u0632\u0646\u06cc\u062f\r\n    setTimeout(function() {\r\n        finalBtn.innerText = \'\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u062b\u0628\u062a \u0634\u062f\';\r\n        finalBtn.style.background = \'#4CAF50\';\r\n        setTimeout(function() {\r\n            closeModalFunc();\r\n            finalBtn.innerText = \'\u062b\u0628\u062a \u0646\u0647\u0627\u06cc\u06cc \u062f\u0631\u062e\u0648\u0627\u0633\u062a\';\r\n            finalBtn.style.background = \'#0070BB\';\r\n            finalBtn.disabled = false;\r\n            form.reset();\r\n        }, 2000);\r\n    }, 1500);\r\n  };\r\n})();\r\n</script>'
                      }
                    />
                  </div>
                  <div
                    className={classNames(projectcss.all, sty.freeBox__xxCI)}
                  >
                    <Embed
                      className={classNames(
                        "__wab_instance",
                        sty.embedHtml__kdlpG
                      )}
                      code={
                        '<div style="width: 100%; display: flex; justify-content: center;">\r\n  <style>\r\n    .divar-static-btn {\r\n      /* \u062a\u063a\u06cc\u06cc\u0631\u0627\u062a \u0627\u0635\u0644\u06cc \u0628\u0631\u0627\u06cc \u062d\u0627\u0644\u062a Secondary */\r\n      background-color: white; /* \u067e\u0633\u200c\u0632\u0645\u06cc\u0646\u0647 \u0633\u0641\u06cc\u062f (\u062a\u0648 \u062e\u0627\u0644\u06cc) */\r\n      color: #a62626; /* \u0645\u062a\u0646 \u0642\u0631\u0645\u0632 */\r\n      border: 1px solid #a62626; /* \u0628\u0648\u0631\u062f\u0631 \u0642\u0631\u0645\u0632 */\r\n      \r\n      border-radius: 4px;\r\n      padding: 10px 10px;\r\n      font-size: 14px;\r\n      font-weight: bold;\r\n      width: 100%;\r\n      cursor: pointer;\r\n      font-family: inherit;\r\n      /* \u0633\u0627\u06cc\u0647 \u0631\u0627 \u0628\u0631\u0627\u06cc \u062f\u06a9\u0645\u0647 \u062b\u0627\u0646\u0648\u06cc\u0647 \u062d\u0630\u0641 \u06a9\u0631\u062f\u0645 \u062a\u0627 \u0641\u0644\u062a\u200c\u062a\u0631 \u0628\u0627\u0634\u062f (\u0627\u062e\u062a\u06cc\u0627\u0631\u06cc) */\r\n      box-shadow: none; \r\n      transition: all 0.2s ease;\r\n    }\r\n    \r\n    .divar-static-btn:hover {\r\n      /* \u062d\u0627\u0644\u062a \u0647\u0627\u0648\u0631: \u06cc\u06a9 \u067e\u0633\u200c\u0632\u0645\u06cc\u0646\u0647 \u062e\u06cc\u0644\u06cc \u0631\u0648\u0634\u0646 \u0642\u0631\u0645\u0632 \u0648 \u062a\u06cc\u0631\u0647\u200c\u062a\u0631 \u0634\u062f\u0646 \u0628\u0648\u0631\u062f\u0631 */\r\n      background-color: #fcf2f2; \r\n      border-color: #851e1e;\r\n      color: #851e1e;\r\n    }\r\n    \r\n    .divar-static-btn:active {\r\n      transform: scale(0.98);\r\n      background-color: #fceceb; /* \u0631\u0646\u06af \u06a9\u0645\u06cc \u062a\u06cc\u0631\u0647\u200c\u062a\u0631 \u0645\u0648\u0642\u0639 \u06a9\u0644\u06cc\u06a9 */\r\n    }\r\n  </style>\r\n\r\n  <button onclick="window.location.href=\'https://open-platform-redirect.divar.ir/completion\'" class="divar-static-btn">\r\n\u0628\u0627\u0632\u06af\u0634\u062a  </button>\r\n</div>'
                      }
                    />
                  </div>
                </div>
              </div>
            </ApiRequest>
          </div>
        </div>
      </div>
    </React.Fragment>
  ) as React.ReactElement | null;
}

const PlasmicDescendants = {
  root: ["root", "main", "profile2", "img", "apiRequest2"],
  main: ["main", "profile2", "img", "apiRequest2"],
  profile2: ["profile2", "img"],
  img: ["img"],
  apiRequest2: ["apiRequest2"]
} as const;
type NodeNameType = keyof typeof PlasmicDescendants;
type DescendantsType<T extends NodeNameType> =
  (typeof PlasmicDescendants)[T][number];
type NodeDefaultElementType = {
  root: "div";
  main: "div";
  profile2: typeof ApiRequest;
  img: typeof PlasmicImg__;
  apiRequest2: typeof ApiRequest;
};

type ReservedPropsType = "variants" | "args" | "overrides";
type NodeOverridesType<T extends NodeNameType> = Pick<
  PlasmicDirectBooking__OverridesType,
  DescendantsType<T>
>;
type NodeComponentProps<T extends NodeNameType> =
  // Explicitly specify variants, args, and overrides as objects
  {
    variants?: PlasmicDirectBooking__VariantsArgs;
    args?: PlasmicDirectBooking__ArgsType;
    overrides?: NodeOverridesType<T>;
  } &
    // Specify variants directly as props
    Omit<PlasmicDirectBooking__VariantsArgs, ReservedPropsType> &
    // Specify args directly as props
    Omit<PlasmicDirectBooking__ArgsType, ReservedPropsType> &
    // Specify overrides for each element directly as props
    Omit<
      NodeOverridesType<T>,
      ReservedPropsType | VariantPropType | ArgPropType
    > &
    // Specify props for the root element
    Omit<
      Partial<React.ComponentProps<NodeDefaultElementType[T]>>,
      ReservedPropsType | VariantPropType | ArgPropType | DescendantsType<T>
    >;

function makeNodeComponent<NodeName extends NodeNameType>(nodeName: NodeName) {
  type PropsType = NodeComponentProps<NodeName> & { key?: React.Key };
  const func = function <T extends PropsType>(
    props: T & StrictProps<T, PropsType>
  ) {
    const { variants, args, overrides } = React.useMemo(
      () =>
        deriveRenderOpts(props, {
          name: nodeName,
          descendantNames: PlasmicDescendants[nodeName],
          internalArgPropNames: PlasmicDirectBooking__ArgProps,
          internalVariantPropNames: PlasmicDirectBooking__VariantProps
        }),
      [props, nodeName]
    );
    return PlasmicDirectBooking__RenderFunc({
      variants,
      args,
      overrides,
      forNode: nodeName
    });
  };
  if (nodeName === "root") {
    func.displayName = "PlasmicDirectBooking";
  } else {
    func.displayName = `PlasmicDirectBooking.${nodeName}`;
  }
  return func;
}

export const PlasmicDirectBooking = Object.assign(
  // Top-level PlasmicDirectBooking renders the root element
  makeNodeComponent("root"),
  {
    // Helper components rendering sub-elements
    main: makeNodeComponent("main"),
    profile2: makeNodeComponent("profile2"),
    img: makeNodeComponent("img"),
    apiRequest2: makeNodeComponent("apiRequest2"),

    // Metadata about props expected for PlasmicDirectBooking
    internalVariantProps: PlasmicDirectBooking__VariantProps,
    internalArgProps: PlasmicDirectBooking__ArgProps,

    // Page metadata
    pageMetadata: {
      title: "",
      description: "",
      ogImageSrc: "",
      canonical: ""
    }
  }
);

export default PlasmicDirectBooking;
/* prettier-ignore-end */
